#!/bin/bash
# Vim plugin management script

set -o nounset
set -o pipefail
set -o errexit

# Colors for output
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

info() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

warn() {
    echo -e "${YELLOW}[WARN]${NC} $1"
}

install_plugins() {
    info "Installing vim plugins..."
    
    if command -v nvim >/dev/null 2>&1; then
        info "Installing plugins for Neovim..."
        nvim +PlugInstall +qall
    fi
    
    if command -v vim >/dev/null 2>&1; then
        info "Installing plugins for Vim..."
        vim +PlugInstall +qall
    fi
    
    info "Plugin installation complete!"
}

update_plugins() {
    info "Updating vim plugins..."
    
    if command -v nvim >/dev/null 2>&1; then
        info "Updating plugins for Neovim..."
        nvim +PlugUpdate +qall
    fi
    
    if command -v vim >/dev/null 2>&1; then
        info "Updating plugins for Vim..."
        vim +PlugUpdate +qall
    fi
    
    info "Plugin update complete!"
}

clean_plugins() {
    info "Cleaning unused vim plugins..."
    
    if command -v nvim >/dev/null 2>&1; then
        info "Cleaning plugins for Neovim..."
        nvim +PlugClean! +qall
    fi
    
    if command -v vim >/dev/null 2>&1; then
        info "Cleaning plugins for Vim..."
        vim +PlugClean! +qall
    fi
    
    info "Plugin cleanup complete!"
}

usage() {
    echo "Usage: $0 {install|update|clean}"
    echo "  install - Install all plugins"
    echo "  update  - Update all plugins"
    echo "  clean   - Remove unused plugins"
}

case "${1:-}" in
    install)
        install_plugins
        ;;
    update)
        update_plugins
        ;;
    clean)
        clean_plugins
        ;;
    *)
        usage
        exit 1
        ;;
esac
